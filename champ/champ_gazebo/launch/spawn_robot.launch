<launch>
    <!-- Arguments -->
    <arg name="robot_name" default="champ"/>
    <arg name="lite" default="false"/>
    <arg name="ros_control_file" default="$(find champ_gazebo)/config/ros_control.yaml"/>
    <arg name="world_init_x" default="0.0"/>
    <arg name="world_init_y" default="0.0"/>
    <arg name="world_init_z" default="0.6"/>
    <arg name="world_init_heading" default="0.0"/>

    <group ns="$(arg robot_name)">
        <!-- Spawn Robot in Ignition -->
        <node name="spawn_robot" pkg="ros_gz_sim" type="create" output="screen"
              args="-name $(arg robot_name) 
                    -topic robot_description
                    -x $(arg world_init_x) 
                    -y $(arg world_init_y) 
                    -z $(arg world_init_z) 
                    -Y $(arg world_init_heading)"/>

        <!-- Load ROS2 Control Parameters -->
        <rosparam file="$(arg ros_control_file)" command="load"/>

        <!-- Load Controllers -->
        <node name="joint_state_controller" pkg="controller_manager" type="spawner"
              output="screen" args="joint_state_broadcaster"/>

        <node name="joint_position_controller" pkg="controller_manager" type="spawner"
              output="screen" args="joint_group_position_controller"/>

        <!-- Contact Sensor -->
        <node pkg="champ_gazebo" name="contact_sensor" type="contact_sensor" output="screen"/>
    </group>
</launch>
